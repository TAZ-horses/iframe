 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Steed Media Mindmap</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #2D3047;
      font-family: sans-serif;
      color: white;
    }
    #container {
      position: relative;
      width: 100%;
      height: 100%;
    }
    .bubble {
      position: absolute;
      padding: 10px 16px;
      border-radius: 50%;
      background: #4ECDC4;
      color: #000;
      text-align: center;
      font-size: 14px;
      font-weight: bold;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      cursor: move;
      white-space: nowrap;
      z-index: 2;
    }
    svg#line-layer {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
      width: 100%;
      height: 100%;
    }
    .line {
      stroke: #aaa;
      stroke-width: 2;
    }
  </style>
</head>
<body>

<svg id="line-layer"></svg>
<div id="container"></div>

<script>
  fetch("mindmap_data_synced.json")
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById("container");
      const svg = document.getElementById("line-layer");

      let yOffset = 60;
      let xOffset = 60;

      Object.entries(data).forEach(([category, entries]) => {
        const categoryNode = document.createElement("div");
        categoryNode.className = "bubble";
        categoryNode.style.background = "#FF6B6B";
        categoryNode.style.left = `${xOffset}px`;
        categoryNode.style.top = `${yOffset}px`;
        categoryNode.textContent = category;
        container.appendChild(categoryNode);

        let cx = xOffset + 220;
        let cy = yOffset;

        entries.forEach(entry => {
          const entryNode = document.createElement("div");
          entryNode.className = "bubble";
          entryNode.style.background = "#f8e71c";
          entryNode.style.left = `${cx}px`;
          entryNode.style.top = `${cy}px`;
          entryNode.innerHTML = `<strong>${entry.service}</strong><br>${entry.username || ""}`;
          container.appendChild(entryNode);

          const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
          line.setAttribute("x1", xOffset + 70);
          line.setAttribute("y1", yOffset + 25);
          line.setAttribute("x2", cx);
          line.setAttribute("y2", cy + 25);
          line.classList.add("line");
          svg.appendChild(line);

          cy += 100;
        });

        yOffset += Math.max(150, entries.length * 100);
      });
    });
</script>

</body>
</html>
